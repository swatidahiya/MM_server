var PasswordValidatorDirective_1;
import * as tslib_1 from "tslib";
import { Directive, Input, forwardRef } from "@angular/core";
import { NG_VALIDATORS, Validators } from "@angular/forms";
import { PasswordValidators } from "./password-validators";
let PasswordValidatorDirective = PasswordValidatorDirective_1 = class PasswordValidatorDirective {
    constructor() {
        this.repeatCharacter = 4;
        this.alphabeticalCharacter = 1;
        this.digitCharacter = 1;
        this.lowercaseCharacter = 1;
        this.uppercaseCharacter = 1;
    }
    ngOnInit() {
        this.repeatCharacterValidator = PasswordValidators.repeatCharacterRegexRule(this.repeatCharacter);
        this.alphabeticalCharacterValidator = PasswordValidators.alphabeticalCharacterRule(this.alphabeticalCharacter);
        this.digitCharacterValidator = PasswordValidators.digitCharacterRule(this.digitCharacter);
        this.lowercaseCharacterValidator = PasswordValidators.lowercaseCharacterRule(this.lowercaseCharacter);
        this.uppercaseCharacterValidator = PasswordValidators.uppercaseCharacterRule(this.uppercaseCharacter);
    }
    ngOnChanges(changes) {
        let inputChanged = false;
        if (changes.repeatCharacter) {
            this.repeatCharacterValidator = PasswordValidators.repeatCharacterRegexRule(changes.repeatCharacter.currentValue);
            inputChanged = changes.repeatCharacter.isFirstChange() ? false : true;
        }
        if (changes.alphabeticalCharacter) {
            this.alphabeticalCharacterValidator = PasswordValidators.alphabeticalCharacterRule(changes.alphabeticalCharacter.currentValue);
            inputChanged = changes.alphabeticalCharacter.isFirstChange() ? false : true;
        }
        if (changes.digitCharacter) {
            this.digitCharacterValidator = PasswordValidators.digitCharacterRule(changes.digitCharacter.currentValue);
            inputChanged = changes.digitCharacter.isFirstChange() ? false : true;
        }
        if (changes.lowercaseCharacter) {
            this.lowercaseCharacterValidator = PasswordValidators.lowercaseCharacterRule(changes.lowercaseCharacter.currentValue);
            inputChanged = changes.lowercaseCharacter.isFirstChange() ? false : true;
        }
        if (changes.uppercaseCharacter) {
            this.uppercaseCharacterValidator = PasswordValidators.uppercaseCharacterRule(changes.uppercaseCharacter.currentValue);
            inputChanged = changes.uppercaseCharacter.isFirstChange() ? false : true;
        }
        if (inputChanged) {
            this.onChange();
        }
    }
    validate(c) {
        const compose = Validators.compose([
            this.repeatCharacterValidator,
            this.digitCharacterValidator,
            this.alphabeticalCharacterValidator,
            this.lowercaseCharacterValidator,
            this.uppercaseCharacterValidator,
        ]);
        return compose(c);
    }
    registerOnValidatorChange(fn) {
        this.onChange = fn;
    }
};
tslib_1.__decorate([
    Input()
], PasswordValidatorDirective.prototype, "repeatCharacter", void 0);
tslib_1.__decorate([
    Input()
], PasswordValidatorDirective.prototype, "alphabeticalCharacter", void 0);
tslib_1.__decorate([
    Input()
], PasswordValidatorDirective.prototype, "digitCharacter", void 0);
tslib_1.__decorate([
    Input()
], PasswordValidatorDirective.prototype, "lowercaseCharacter", void 0);
tslib_1.__decorate([
    Input()
], PasswordValidatorDirective.prototype, "uppercaseCharacter", void 0);
PasswordValidatorDirective = PasswordValidatorDirective_1 = tslib_1.__decorate([
    Directive({
        selector: "[password][formControlName],[password][formControl],[password][ngModel]",
        providers: [
            {
                provide: NG_VALIDATORS,
                // tslint:disable-next-line:no-forward-ref
                useExisting: forwardRef(() => PasswordValidatorDirective_1),
                multi: true,
            },
        ],
    })
], PasswordValidatorDirective);
export { PasswordValidatorDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFzc3dvcmQuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXZhbGlkYXRvcnMvIiwic291cmNlcyI6WyJjb21wb25lbnRzL3Bhc3N3b3JkL3Bhc3N3b3JkLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBb0MsTUFBTSxlQUFlLENBQUM7QUFDL0YsT0FBTyxFQUFFLGFBQWEsRUFBYSxVQUFVLEVBQWtELE1BQU0sZ0JBQWdCLENBQUM7QUFFdEgsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFhM0QsSUFBYSwwQkFBMEIsa0NBQXZDLE1BQWEsMEJBQTBCO0lBWHZDO1FBWVcsb0JBQWUsR0FBRyxDQUFDLENBQUM7UUFDcEIsMEJBQXFCLEdBQUcsQ0FBQyxDQUFDO1FBQzFCLG1CQUFjLEdBQUcsQ0FBQyxDQUFDO1FBQ25CLHVCQUFrQixHQUFHLENBQUMsQ0FBQztRQUN2Qix1QkFBa0IsR0FBRyxDQUFDLENBQUM7SUFxRWxDLENBQUM7SUE1REMsUUFBUTtRQUNOLElBQUksQ0FBQyx3QkFBd0IsR0FBRyxrQkFBa0IsQ0FBQyx3QkFBd0IsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDbEcsSUFBSSxDQUFDLDhCQUE4QixHQUFHLGtCQUFrQixDQUFDLHlCQUF5QixDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO1FBQy9HLElBQUksQ0FBQyx1QkFBdUIsR0FBRyxrQkFBa0IsQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDMUYsSUFBSSxDQUFDLDJCQUEyQixHQUFHLGtCQUFrQixDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO1FBQ3RHLElBQUksQ0FBQywyQkFBMkIsR0FBRyxrQkFBa0IsQ0FBQyxzQkFBc0IsQ0FBQyxJQUFJLENBQUMsa0JB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QztnQkFDMUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyw0QkFBMEIsQ0FBQztnQkFDekQsS0FBSyxFQUFFLElBQUk7YUFDWjtTQUNGO0tBQ0YsQ0FBQztHQUNXLDBCQUEwQixDQTBFdEM7U0ExRVksMEJBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBJbnB1dCwgZm9yd2FyZFJlZiwgT25Jbml0LCBTaW1wbGVDaGFuZ2VzLCBPbkNoYW5nZXMgfSBmcm9tIFwiQGFuZ3VsYXIvY29yZVwiO1xuaW1wb3J0IHsgTkdfVkFMSURBVE9SUywgVmFsaWRhdG9yLCBWYWxpZGF0b3JzLCBWYWxpZGF0b3JGbiwgQWJzdHJhY3RDb250cm9sLCBWYWxpZGF0aW9uRXJyb3JzIH0gZnJvbSBcIkBhbmd1bGFyL2Zvcm1zXCI7XG5cbmltcG9ydCB7IFBhc3N3b3JkVmFsaWRhdG9ycyB9IGZyb20gXCIuL3Bhc3N3b3JkLXZhbGlkYXRvcnNcIjtcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiBcIltwYXNzd29yZF1bZm9ybUNvbnRyb2xOYW1lXSxbcGFzc3dvcmRdW2Zvcm1Db250cm9sXSxbcGFzc3dvcmRdW25nTW9kZWxdXCIsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTElEQVRPUlMsXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tZm9yd2FyZC1yZWZcbiAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IFBhc3N3b3JkVmFsaWRhdG9yRGlyZWN0aXZlKSxcbiAgICAgIG11bHRpOiB0cnVlLFxuICAgIH0sXG4gIF0sXG59KVxuZXhwb3J0IGNsYXNzIFBhc3N3b3JkVmFsaWRhdG9yRGlyZWN0aXZlIGltcGxlbWVudHMgVmFsaWRhdG9yLCBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIHJlcGVhdENoYXJhY3RlciA9IDQ7XG4gIEBJbnB1dCgpIGFscGhhYmV0aWNhbENoYXJhY3RlciA9IDE7XG4gIEBJbnB1dCgpIGRpZ2l0Q2hhcmFjdGVyID0gMTtcbiAgQElucHV0KCkgbG93ZXJjYXNlQ2hhcmFjdGVyID0gMTtcbiAgQElucHV0KCkgdXBwZXJjYXNlQ2hhcmFjdGVyID0gMTtcblxuICBwcml2YXRlIHJlcGVhdENoYXJhY3RlclZhbGlkYXRvcjogVmFsaWRhdG9yRm47XG4gIHByaXZhdGUgYWxwaGFiZXRpY2FsQ2hhcmFjdGVyVmFsaWRhdG9yOiBWYWxpZGF0b3JGbjtcbiAgcHJpdmF0ZSBkaWdpdENoYXJhY3RlclZhbGlkYXRvcjogVmFsaWRhdG9yRm47XG4gIHByaXZhdGUgbG93ZXJjYXNlQ2hhcmFjdGVyVmFsaWRhdG9yOiBWYWxpZGF0b3JGbjtcbiAgcHJpdmF0ZSB1cHBlcmNhc2VDaGFyYWN0ZXJWYWxpZGF0b3I6IFZhbGlkYXRvckZuO1xuICBwcml2YXRlIG9uQ2hhbmdlOiAoKSA9PiB2b2lkO1xuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMucmVwZWF0Q2hhcmFjdGVyVmFsaWRhdG9yID0gUGFzc3dvcmRWYWxpZGF0b3JzLnJlcGVhdENoYXJhY3RlclJlZ2V4UnVsZSh0aGlzLnJlcGVhdENoYXJhY3Rlcik7XG4gICAgdGhpcy5hbHBoYWJldGljYWxDaGFyYWN0ZXJWYWxpZGF0b3IgPSBQYXNzd29yZFZhbGlkYXRvcnMuYWxwaGFiZXRpY2FsQ2hhcmFjdGVyUnVsZSh0aGlzLmFscGhhYmV0aWNhbENoYXJhY3Rlcik7XG4gICAgdGhpcy5kaWdpdENoYXJhY3RlclZhbGlkYXRvciA9IFBhc3N3b3JkVmFsaWRhdG9ycy5kaWdpdENoYXJhY3RlclJ1bGUodGhpcy5kaWdpdENoYXJhY3Rlcik7XG4gICAgdGhpcy5sb3dlcmNhc2VDaGFyYWN0ZXJWYWxpZGF0b3IgPSBQYXNzd29yZFZhbGlkYXRvcnMubG93ZXJjYXNlQ2hhcmFjdGVyUnVsZSh0aGlzLmxvd2VyY2FzZUNoYXJhY3Rlcik7XG4gICAgdGhpcy51cHBlcmNhc2VDaGFyYWN0ZXJWYWxpZGF0b3IgPSBQYXNzd29yZFZhbGlkYXRvcnMudXBwZXJjYXNlQ2hhcmFjdGVyUnVsZSh0aGlzLnVwcGVyY2FzZUNoYXJhY3Rlcik7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgbGV0IGlucHV0Q2hhbmdlZCA9IGZhbHNlO1xuICAgIGlmIChjaGFuZ2VzLnJlcGVhdENoYXJhY3Rlcikge1xuICAgICAgdGhpcy5yZXBlYXRDaGFyYWN0ZXJWYWxpZGF0b3IgPSBQYXNzd29yZFZhbGlkYXRvcnMucmVwZWF0Q2hhcmFjdGVyUmVnZXhSdWxlKGNoYW5nZXMucmVwZWF0Q2hhcmFjdGVyLmN1cnJlbnRWYWx1ZSk7XG4gICAgICBpbnB1dENoYW5nZWQgPSBjaGFuZ2VzLnJlcGVhdENoYXJhY3Rlci5pc0ZpcnN0Q2hhbmdlKCkgPyBmYWxzZSA6IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZXMuYWxwaGFiZXRpY2FsQ2hhcmFjdGVyKSB7XG4gICAgICB0aGlzLmFscGhhYmV0aWNhbENoYXJhY3RlclZhbGlkYXRvciA9IFBhc3N3b3JkVmFsaWRhdG9ycy5hbHBoYWJldGljYWxDaGFyYWN0ZXJSdWxlKFxuICAgICAgICBjaGFuZ2VzLmFscGhhYmV0aWNhbENoYXJhY3Rlci5jdXJyZW50VmFsdWVcbiAgICAgICk7XG4gICAgICBpbnB1dENoYW5nZWQgPSBjaGFuZ2VzLmFscGhhYmV0aWNhbENoYXJhY3Rlci5pc0ZpcnN0Q2hhbmdlKCkgPyBmYWxzZSA6IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGNoYW5nZXMuZGlnaXRDaGFyYWN0ZXIpIHtcbiAgICAgIHRoaXMuZGlnaXRDaGFyYWN0ZXJWYWxpZGF0b3IgPSBQYXNzd29yZFZhbGlkYXRvcnMuZGlnaXRDaGFyYWN0ZXJSdWxlKGNoYW5nZXMuZGlnaXRDaGFyYWN0ZXIuY3VycmVudFZhbHVlKTtcbiAgICAgIGlucHV0Q2hhbmdlZCA9IGNoYW5nZXMuZGlnaXRDaGFyYWN0ZXIuaXNGaXJzdENoYW5nZSgpID8gZmFsc2UgOiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VzLmxvd2VyY2FzZUNoYXJhY3Rlcikge1xuICAgICAgdGhpcy5sb3dlcmNhc2VDaGFyYWN0ZXJWYWxpZGF0b3IgPSBQYXNzd29yZFZhbGlkYXRvcnMubG93ZXJjYXNlQ2hhcmFjdGVyUnVsZShcbiAgICAgICAgY2hhbmdlcy5sb3dlcmNhc2VDaGFyYWN0ZXIuY3VycmVudFZhbHVlXG4gICAgICApO1xuICAgICAgaW5wdXRDaGFuZ2VkID0gY2hhbmdlcy5sb3dlcmNhc2VDaGFyYWN0ZXIuaXNGaXJzdENoYW5nZSgpID8gZmFsc2UgOiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VzLnVwcGVyY2FzZUNoYXJhY3Rlcikge1xuICAgICAgdGhpcy51cHBlcmNhc2VDaGFyYWN0ZXJWYWxpZGF0b3IgPSBQYXNzd29yZFZhbGlkYXRvcnMudXBwZXJjYXNlQ2hhcmFjdGVyUnVsZShcbiAgICAgICAgY2hhbmdlcy51cHBlcmNhc2VDaGFyYWN0ZXIuY3VycmVudFZhbHVlXG4gICAgICApO1xuICAgICAgaW5wdXRDaGFuZ2VkID0gY2hhbmdlcy51cHBlcmNhc2VDaGFyYWN0ZXIuaXNGaXJzdENoYW5nZSgpID8gZmFsc2UgOiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChpbnB1dENoYW5nZWQpIHtcbiAgICAgIHRoaXMub25DaGFuZ2UoKTtcbiAgICB9XG4gIH1cblxuICB2YWxpZGF0ZShjOiBBYnN0cmFjdENvbnRyb2wpOiBWYWxpZGF0aW9uRXJyb3JzIHtcbiAgICBjb25zdCBjb21wb3NlOiBWYWxpZGF0b3JGbiA9IFZhbGlkYXRvcnMuY29tcG9zZShbXG4gICAgICB0aGlzLnJlcGVhdENoYXJhY3RlclZhbGlkYXRvcixcbiAgICAgIHRoaXMuZGlnaXRDaGFyYWN0ZXJWYWxpZGF0b3IsXG4gICAgICB0aGlzLmFscGhhYmV0aWNhbENoYXJhY3RlclZhbGlkYXRvcixcbiAgICAgIHRoaXMubG93ZXJjYXNlQ2hhcmFjdGVyVmFsaWRhdG9yLFxuICAgICAgdGhpcy51cHBlcmNhc2VDaGFyYWN0ZXJWYWxpZGF0b3IsXG4gICAgXSk7XG4gICAgcmV0dXJuIGNvbXBvc2UoYyk7XG4gIH1cblxuICByZWdpc3Rlck9uVmFsaWRhdG9yQ2hhbmdlKGZuOiAoKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICB9XG59XG4iXX0=