import * as tslib_1 from "tslib";
import { Directive, Input, forwardRef } from "@angular/core";
import { NG_VALIDATORS, Validators } from "@angular/forms";
import { PasswordValidators } from "./password-validators";
var PasswordValidatorDirective = /** @class */ (function () {
    function PasswordValidatorDirective() {
        this.repeatCharacter = 4;
        this.alphabeticalCharacter = 1;
        this.digitCharacter = 1;
        this.lowercaseCharacter = 1;
        this.uppercaseCharacter = 1;
    }
    PasswordValidatorDirective_1 = PasswordValidatorDirective;
    PasswordValidatorDirective.prototype.ngOnInit = function () {
        this.repeatCharacterValidator = PasswordValidators.repeatCharacterRegexRule(this.repeatCharacter);
        this.alphabeticalCharacterValidator = PasswordValidators.alphabeticalCharacterRule(this.alphabeticalCharacter);
        this.digitCharacterValidator = PasswordValidators.digitCharacterRule(this.digitCharacter);
        this.lowercaseCharacterValidator = PasswordValidators.lowercaseCharacterRule(this.lowercaseCharacter);
        this.uppercaseCharacterValidator = PasswordValidators.uppercaseCharacterRule(this.uppercaseCharacter);
    };
    PasswordValidatorDirective.prototype.ngOnChanges = function (changes) {
        var inputChanged = false;
        if (changes.repeatCharacter) {
            this.repeatCharacterValidator = PasswordValidators.repeatCharacterRegexRule(changes.repeatCharacter.currentValue);
            inputChanged = changes.repeatCharacter.isFirstChange() ? false : true;
        }
        if (changes.alphabeticalCharacter) {
            this.alphabeticalCharacterValidator = PasswordValidators.alphabeticalCharacterRule(changes.alphabeticalCharacter.currentValue);
            inputChanged = changes.alphabeticalCharacter.isFirstChange() ? false : true;
        }
        if (changes.digitCharacter) {
            this.digitCharacterValidator = PasswordValidators.digitCharacterRule(changes.digitCharacter.currentValue);
            inputChanged = changes.digitCharacter.isFirstChange() ? false : true;
        }
        if (changes.lowercaseCharacter) {
            this.lowercaseCharacterValidator = PasswordValidators.lowercaseCharacterRule(changes.lowercaseCharacter.currentValue);
            inputChanged = changes.lowercaseCharacter.isFirstChange() ? false : true;
        }
        if (changes.uppercaseCharacter) {
            this.uppercaseCharacterValidator = PasswordValidators.uppercaseCharacterRule(changes.uppercaseCharacter.currentValue);
            inputChanged = changes.uppercaseCharacter.isFirstChange() ? false : true;
        }
        if (inputChanged) {
            this.onChange();
        }
    };
    PasswordValidatorDirective.prototype.validate = function (c) {
        var compose = Validators.compose([
            this.repeatCharacterValidator,
            this.digitCharacterValidator,
            this.alphabeticalCharacterValidator,
            this.lowercaseCharacterValidator,
            this.uppercaseCharacterValidator,
        ]);
        return compose(c);
    };
    PasswordValidatorDirective.prototype.registerOnValidatorChange = function (fn) {
        this.onChange = fn;
    };
    var PasswordValidatorDirective_1;
    tslib_1.__decorate([
        Input()
    ], PasswordValidatorDirective.prototype, "repeatCharacter", void 0);
    tslib_1.__decorate([
        Input()
    ], PasswordValidatorDirective.prototype, "alphabeticalCharacter", void 0);
    tslib_1.__decorate([
        Input()
    ], PasswordValidatorDirective.prototype, "digitCharacter", void 0);
    tslib_1.__decorate([
        Input()
    ], PasswordValidatorDirective.prototype, "lowercaseCharacter", void 0);
    tslib_1.__decorate([
        Input()
    ], PasswordValidatorDirective.prototype, "uppercaseCharacter", void 0);
    PasswordValidatorDirective = PasswordValidatorDirective_1 = tslib_1.__decorate([
        Directive({
            selector: "[password][formControlName],[password][formControl],[password][ngModel]",
            providers: [
                {
                    provide: NG_VALIDATORS,
                    // tslint:disable-next-line:no-forward-ref
                    useExisting: forwardRef(function () { return PasswordValidatorDirective_1; }),
                    multi: true,
                },
            ],
        })
    ], PasswordValidatorDirective);
    return PasswordValidatorDirective;
}());
export { PasswordValidatorDirective };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFzc3dvcmQuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXZhbGlkYXRvcnMvIiwic291cmNlcyI6WyJjb21wb25lbnRzL3Bhc3N3b3JkL3Bhc3N3b3JkLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsVUFBVSxFQUFvQyxNQUFNLGVBQWUsQ0FBQztBQUMvRixPQUFPLEVBQUUsYUFBYSxFQUFhLFVBQVUsRUFBa0QsTUFBTSxnQkFBZ0IsQ0FBQztBQUV0SCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQWEzRDtJQVhBO1FBWVcsb0JBQWUsR0FBRyxDQUFDLENBQUM7UUFDcEIsMEJBQXFCLEdBQUcsQ0FBQyxDQUFDO1FBQzFCLG1CQUFjLEdBQUcsQ0FBQyxDQUFDO1FBQ25CLHVCQUFrQixHQUFHLENBQUMsQ0FBQztRQUN2Qix1QkFBa0IsR0FBRyxDQUFDLENBQUM7SUFxRWxDLENBQUM7bUNBMUVZLDBCQUEwQjtJQWNyQyw2Q0FBUSxHQUFSO1FBQ0UsSUFBSSxDQUFDLHdCQUF3QixHQUFHLGtCQUFrQixDQUFDLHdCQUF3QixDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUNsRyxJQUFJLENBQUMsOEJBQThCLEdBQUcsa0JBQWtCLENBQUMseUJBQXlCLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7UUFDL0csSUFBSSxDQUFDLHVCQUF1QixHQUFHLGtCQUFrQixDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUMxRixJQUFJLENBQUMsMkJBQTJCLEdBQUcsa0JBQWtCLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDdEcsSUFBSSxDQUFDLDJCQUEyQixHQUFHLGtCQUFrQixDQUFDLHNCQUFzQixDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFD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b0JBQzFDLFdBQVcsRUFBRSxVQUFVLENBQUMsY0FBTSxPQUFBLDRCQUEwQixFQUExQixDQUEwQixDQUFDO29CQUN6RCxLQUFLLEVBQUUsSUFBSTtpQkFDWjthQUNGO1NBQ0YsQ0FBQztPQUNXLDBCQUEwQixDQTBFdEM7SUFBRCxpQ0FBQztDQUFBLEFBMUVELElBMEVDO1NBMUVZLDBCQUEwQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERpcmVjdGl2ZSwgSW5wdXQsIGZvcndhcmRSZWYsIE9uSW5pdCwgU2ltcGxlQ2hhbmdlcywgT25DaGFuZ2VzIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCB7IE5HX1ZBTElEQVRPUlMsIFZhbGlkYXRvciwgVmFsaWRhdG9ycywgVmFsaWRhdG9yRm4sIEFic3RyYWN0Q29udHJvbCwgVmFsaWRhdGlvbkVycm9ycyB9IGZyb20gXCJAYW5ndWxhci9mb3Jtc1wiO1xuXG5pbXBvcnQgeyBQYXNzd29yZFZhbGlkYXRvcnMgfSBmcm9tIFwiLi9wYXNzd29yZC12YWxpZGF0b3JzXCI7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogXCJbcGFzc3dvcmRdW2Zvcm1Db250cm9sTmFtZV0sW3Bhc3N3b3JkXVtmb3JtQ29udHJvbF0sW3Bhc3N3b3JkXVtuZ01vZGVsXVwiLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxJREFUT1JTLFxuICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWZvcndhcmQtcmVmXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBQYXNzd29yZFZhbGlkYXRvckRpcmVjdGl2ZSksXG4gICAgICBtdWx0aTogdHJ1ZSxcbiAgICB9LFxuICBdLFxufSlcbmV4cG9ydCBjbGFzcyBQYXNzd29yZFZhbGlkYXRvckRpcmVjdGl2ZSBpbXBsZW1lbnRzIFZhbGlkYXRvciwgT25Jbml0LCBPbkNoYW5nZXMge1xuICBASW5wdXQoKSByZXBlYXRDaGFyYWN0ZXIgPSA0O1xuICBASW5wdXQoKSBhbHBoYWJldGljYWxDaGFyYWN0ZXIgPSAxO1xuICBASW5wdXQoKSBkaWdpdENoYXJhY3RlciA9IDE7XG4gIEBJbnB1dCgpIGxvd2VyY2FzZUNoYXJhY3RlciA9IDE7XG4gIEBJbnB1dCgpIHVwcGVyY2FzZUNoYXJhY3RlciA9IDE7XG5cbiAgcHJpdmF0ZSByZXBlYXRDaGFyYWN0ZXJWYWxpZGF0b3I6IFZhbGlkYXRvckZuO1xuICBwcml2YXRlIGFscGhhYmV0aWNhbENoYXJhY3RlclZhbGlkYXRvcjogVmFsaWRhdG9yRm47XG4gIHByaXZhdGUgZGlnaXRDaGFyYWN0ZXJWYWxpZGF0b3I6IFZhbGlkYXRvckZuO1xuICBwcml2YXRlIGxvd2VyY2FzZUNoYXJhY3RlclZhbGlkYXRvcjogVmFsaWRhdG9yRm47XG4gIHByaXZhdGUgdXBwZXJjYXNlQ2hhcmFjdGVyVmFsaWRhdG9yOiBWYWxpZGF0b3JGbjtcbiAgcHJpdmF0ZSBvbkNoYW5nZTogKCkgPT4gdm9pZDtcblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnJlcGVhdENoYXJhY3RlclZhbGlkYXRvciA9IFBhc3N3b3JkVmFsaWRhdG9ycy5yZXBlYXRDaGFyYWN0ZXJSZWdleFJ1bGUodGhpcy5yZXBlYXRDaGFyYWN0ZXIpO1xuICAgIHRoaXMuYWxwaGFiZXRpY2FsQ2hhcmFjdGVyVmFsaWRhdG9yID0gUGFzc3dvcmRWYWxpZGF0b3JzLmFscGhhYmV0aWNhbENoYXJhY3RlclJ1bGUodGhpcy5hbHBoYWJldGljYWxDaGFyYWN0ZXIpO1xuICAgIHRoaXMuZGlnaXRDaGFyYWN0ZXJWYWxpZGF0b3IgPSBQYXNzd29yZFZhbGlkYXRvcnMuZGlnaXRDaGFyYWN0ZXJSdWxlKHRoaXMuZGlnaXRDaGFyYWN0ZXIpO1xuICAgIHRoaXMubG93ZXJjYXNlQ2hhcmFjdGVyVmFsaWRhdG9yID0gUGFzc3dvcmRWYWxpZGF0b3JzLmxvd2VyY2FzZUNoYXJhY3RlclJ1bGUodGhpcy5sb3dlcmNhc2VDaGFyYWN0ZXIpO1xuICAgIHRoaXMudXBwZXJjYXNlQ2hhcmFjdGVyVmFsaWRhdG9yID0gUGFzc3dvcmRWYWxpZGF0b3JzLnVwcGVyY2FzZUNoYXJhY3RlclJ1bGUodGhpcy51cHBlcmNhc2VDaGFyYWN0ZXIpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGxldCBpbnB1dENoYW5nZWQgPSBmYWxzZTtcbiAgICBpZiAoY2hhbmdlcy5yZXBlYXRDaGFyYWN0ZXIpIHtcbiAgICAgIHRoaXMucmVwZWF0Q2hhcmFjdGVyVmFsaWRhdG9yID0gUGFzc3dvcmRWYWxpZGF0b3JzLnJlcGVhdENoYXJhY3RlclJlZ2V4UnVsZShjaGFuZ2VzLnJlcGVhdENoYXJhY3Rlci5jdXJyZW50VmFsdWUpO1xuICAgICAgaW5wdXRDaGFuZ2VkID0gY2hhbmdlcy5yZXBlYXRDaGFyYWN0ZXIuaXNGaXJzdENoYW5nZSgpID8gZmFsc2UgOiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VzLmFscGhhYmV0aWNhbENoYXJhY3Rlcikge1xuICAgICAgdGhpcy5hbHBoYWJldGljYWxDaGFyYWN0ZXJWYWxpZGF0b3IgPSBQYXNzd29yZFZhbGlkYXRvcnMuYWxwaGFiZXRpY2FsQ2hhcmFjdGVyUnVsZShcbiAgICAgICAgY2hhbmdlcy5hbHBoYWJldGljYWxDaGFyYWN0ZXIuY3VycmVudFZhbHVlXG4gICAgICApO1xuICAgICAgaW5wdXRDaGFuZ2VkID0gY2hhbmdlcy5hbHBoYWJldGljYWxDaGFyYWN0ZXIuaXNGaXJzdENoYW5nZSgpID8gZmFsc2UgOiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChjaGFuZ2VzLmRpZ2l0Q2hhcmFjdGVyKSB7XG4gICAgICB0aGlzLmRpZ2l0Q2hhcmFjdGVyVmFsaWRhdG9yID0gUGFzc3dvcmRWYWxpZGF0b3JzLmRpZ2l0Q2hhcmFjdGVyUnVsZShjaGFuZ2VzLmRpZ2l0Q2hhcmFjdGVyLmN1cnJlbnRWYWx1ZSk7XG4gICAgICBpbnB1dENoYW5nZWQgPSBjaGFuZ2VzLmRpZ2l0Q2hhcmFjdGVyLmlzRmlyc3RDaGFuZ2UoKSA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoY2hhbmdlcy5sb3dlcmNhc2VDaGFyYWN0ZXIpIHtcbiAgICAgIHRoaXMubG93ZXJjYXNlQ2hhcmFjdGVyVmFsaWRhdG9yID0gUGFzc3dvcmRWYWxpZGF0b3JzLmxvd2VyY2FzZUNoYXJhY3RlclJ1bGUoXG4gICAgICAgIGNoYW5nZXMubG93ZXJjYXNlQ2hhcmFjdGVyLmN1cnJlbnRWYWx1ZVxuICAgICAgKTtcbiAgICAgIGlucHV0Q2hhbmdlZCA9IGNoYW5nZXMubG93ZXJjYXNlQ2hhcmFjdGVyLmlzRmlyc3RDaGFuZ2UoKSA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoY2hhbmdlcy51cHBlcmNhc2VDaGFyYWN0ZXIpIHtcbiAgICAgIHRoaXMudXBwZXJjYXNlQ2hhcmFjdGVyVmFsaWRhdG9yID0gUGFzc3dvcmRWYWxpZGF0b3JzLnVwcGVyY2FzZUNoYXJhY3RlclJ1bGUoXG4gICAgICAgIGNoYW5nZXMudXBwZXJjYXNlQ2hhcmFjdGVyLmN1cnJlbnRWYWx1ZVxuICAgICAgKTtcbiAgICAgIGlucHV0Q2hhbmdlZCA9IGNoYW5nZXMudXBwZXJjYXNlQ2hhcmFjdGVyLmlzRmlyc3RDaGFuZ2UoKSA/IGZhbHNlIDogdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoaW5wdXRDaGFuZ2VkKSB7XG4gICAgICB0aGlzLm9uQ2hhbmdlKCk7XG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGUoYzogQWJzdHJhY3RDb250cm9sKTogVmFsaWRhdGlvbkVycm9ycyB7XG4gICAgY29uc3QgY29tcG9zZTogVmFsaWRhdG9yRm4gPSBWYWxpZGF0b3JzLmNvbXBvc2UoW1xuICAgICAgdGhpcy5yZXBlYXRDaGFyYWN0ZXJWYWxpZGF0b3IsXG4gICAgICB0aGlzLmRpZ2l0Q2hhcmFjdGVyVmFsaWRhdG9yLFxuICAgICAgdGhpcy5hbHBoYWJldGljYWxDaGFyYWN0ZXJWYWxpZGF0b3IsXG4gICAgICB0aGlzLmxvd2VyY2FzZUNoYXJhY3RlclZhbGlkYXRvcixcbiAgICAgIHRoaXMudXBwZXJjYXNlQ2hhcmFjdGVyVmFsaWRhdG9yLFxuICAgIF0pO1xuICAgIHJldHVybiBjb21wb3NlKGMpO1xuICB9XG5cbiAgcmVnaXN0ZXJPblZhbGlkYXRvckNoYW5nZShmbjogKCkgPT4gdm9pZCk6IHZvaWQge1xuICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgfVxufVxuIl19