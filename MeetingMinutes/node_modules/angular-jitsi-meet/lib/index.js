// Generated by CoffeeScript 1.10.0
(function() {
  'use strict';
  var APP, AngularServiceGenerator, ajmModule, eventMappings, mod, modName;

  AngularServiceGenerator = require('./common/AngularServiceGenerator');

  eventMappings = require('./jitsi/eventMappings');

  APP = require('./jitsi/app');

  APP.initAppObject();

  window.APP = APP;

  ajmModule = angular.module('jm', [require('./common')]);

  for (modName in APP) {
    mod = APP[modName];
    if (typeof mod === 'object') {
      AngularServiceGenerator.wrapInAngular(ajmModule, mod, modName);
      if (eventMappings.hasOwnProperty(modName)) {
        AngularServiceGenerator.makeEventConstants(ajmModule, eventMappings[modName]);
      }
    }
  }

  ajmModule.provider('jitsiApp', function() {
    var eventsWired, vm;
    vm = this;
    eventsWired = false;
    vm.config = {
      wireEvents: true
    };
    vm.wireEvents = function(shouldWireEvents) {
      return vm.config.wireEvents = shouldWireEvents;
    };
    vm.$get = function(EventAdapter) {
      'ngInject';
      APP.wireUpEvents = function() {
        var eventMapping;
        if (!eventsWired) {
          for (modName in eventMappings) {
            eventMapping = eventMappings[modName];
            AngularServiceGenerator.wireUpEvents(EventAdapter, ajmModule, APP[modName], eventMapping);
          }
          return eventsWired = true;
        }
      };
      APP.clearEvents = function() {
        var eventMapping;
        for (modName in eventMappings) {
          eventMapping = eventMappings[modName];
          AngularServiceGenerator.clearEvents(EventAdapter, eventMapping, APP[modName]);
        }
        return eventsWired = false;
      };
      if (vm.config.wireEvents) {
        APP.wireUpEvents();
      }
      return APP;
    };
    return vm;
  });

  module.exports = ajmModule.name;

}).call(this);
